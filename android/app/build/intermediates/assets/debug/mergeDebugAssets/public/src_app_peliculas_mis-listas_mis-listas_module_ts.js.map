{"version":3,"file":"src_app_peliculas_mis-listas_mis-listas_module_ts.js","mappings":"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","sources":["./src/app/peliculas/mis-listas/crear-lista/crear-lista.component.ts","./src/app/peliculas/mis-listas/mis-listas-routing.module.ts","./src/app/peliculas/mis-listas/mis-listas.module.ts","./src/app/peliculas/mis-listas/mis-listas.page.ts","./src/app/shared/services/list.service.ts"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { movieList } from 'src/app/shared/models/list.model';\r\nimport { ListService } from 'src/app/shared/services/list.service';\r\n\r\n@Component({\r\n  selector: 'app-crear-lista',\r\n  templateUrl: './crear-lista.component.html',\r\n  styleUrls: ['./crear-lista.component.scss'],\r\n})\r\nexport class CrearListaComponent implements OnInit {\r\n\r\n  @Input() idUser: string;\r\n  nameId: string;\r\n  listaNueva: movieList;\r\n\r\n  listaForm = new FormGroup ({\r\n    nombreLista: new FormControl('', Validators.required),\r\n    contenidoLista: new FormControl()\r\n  })\r\n\r\n  constructor(\r\n    private modalCtrl: ModalController,\r\n    private listService: ListService\r\n  ) { }\r\n\r\n  ngOnInit() {}\r\n\r\n  onCancel() {\r\n    this.modalCtrl.dismiss();\r\n  }\r\n\r\n  onSubmit() {\r\n    this.nameId = this.listaForm.get('nombreLista').value.toLowerCase().replace(/\\s/g, '-')\r\n    console.log(this.nameId)\r\n    this.listaNueva = {\r\n      nombre: this.listaForm.value.nombreLista,\r\n      contenido: ['']\r\n    }\r\n    this.listService.nuevaLista(this.listaNueva, this.nameId)\r\n    this.nameId = '';\r\n    this.listaForm.reset\r\n    this.onCancel();\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { MisListasPage } from './mis-listas.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: MisListasPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class MisListasPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { MisListasPageRoutingModule } from './mis-listas-routing.module';\r\n\r\nimport { MisListasPage } from './mis-listas.page';\r\nimport { CrearListaComponent } from './crear-lista/crear-lista.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    MisListasPageRoutingModule,\r\n    ReactiveFormsModule\r\n  ],\r\n  declarations: [\r\n    MisListasPage,\r\n    CrearListaComponent\r\n  ],\r\n  entryComponents: [CrearListaComponent]\r\n})\r\nexport class MisListasPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { Lista } from 'src/app/shared/models/list.model';\r\nimport { ImdbService } from 'src/app/shared/services/imdb.service';\r\nimport { ListService } from 'src/app/shared/services/list.service';\r\nimport { SeenService } from 'src/app/shared/services/seen.service';\r\nimport { CrearListaComponent } from './crear-lista/crear-lista.component';\r\n\r\n@Component({\r\n  selector: 'app-mis-listas',\r\n  templateUrl: './mis-listas.page.html',\r\n  styleUrls: ['./mis-listas.page.scss'],\r\n})\r\nexport class MisListasPage implements OnInit {\r\n\r\n  loadedMovies: any[] = [];\r\n  loadedLists: any;\r\n  allIds: any[] = [];\r\n  isLoaded: boolean = false;\r\n  userKey: string = 'usuario1h18'\r\n\r\n  constructor(\r\n    private router: ActivatedRoute,\r\n    private listService: ListService,\r\n    private modalCtrl: ModalController\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.loadedLists = this.listService.getAllLists2()\r\n    this.check()\r\n    this.isLoaded = true;\r\n  }\r\n\r\n  onAddList() {\r\n    this.modalCtrl\r\n    .create({ component: CrearListaComponent, componentProps: {idUser: this.userKey} })\r\n    .then(modalElement => {\r\n      modalElement.present();\r\n    })\r\n  }\r\n\r\n  check() {\r\n    console.log('a')\r\n    console.log(this.loadedLists)\r\n  }\r\n\r\n  onOpenList() {\r\n    \r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { Lista, } from '../models/list.model';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ListService {\r\n\r\n\r\n  private baseUrl = environment.URL_BD_LIST\r\n  private plainUrl = environment.URL_BD_LIST_PLAIN\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  userId: string = 'a1';\r\n\r\n  allLists: Lista[] = [\r\n    {\r\n      listName: 'Lista por ver',\r\n      listContent: [\r\n        'tt0441773',\r\n        'tt10648342',\r\n        'tt5251328',\r\n        'tt9411972'\r\n      ]\r\n    },\r\n    {\r\n      listName: 'Lista de las buenas',\r\n      listContent: [\r\n        'tt10648342',\r\n        'tt1649418'\r\n      ]\r\n    },\r\n  ]\r\n\r\n  getMyList() {\r\n    console.log(this.allLists + 'askdjaslkdjaslk')\r\n    return this.allLists;\r\n  }\r\n\r\n  nuevaLista(data, folderName) {\r\n    this.http.put(this.baseUrl + folderName + '.json', data).subscribe({next: respuesta => {\r\n      console.log(respuesta);\r\n    }})\r\n  }\r\n\r\n  newList(data: any, id: number) {\r\n    this.http.put(this.baseUrl + id + '.json', data).subscribe({next: respuesta => {\r\n    }})\r\n  }\r\n  \r\n  newListDeep(data: any, id: number) {\r\n    this.http.put(this.baseUrl + id + '/listContent.json', data).subscribe({next: respuesta => {\r\n    }})\r\n  }\r\n\r\n  getAllLists() {\r\n    let array: any[] = []\r\n    this.http.get(this.plainUrl).pipe(map(response => {\r\n      for (let k in response) {\r\n        array.push(response[k])\r\n      }\r\n    })).subscribe()\r\n    return array;\r\n  }\r\n\r\n\r\n  getAllLists2() {\r\n    let array: any[] = []\r\n    let arrayX: any[] = []\r\n    this.http.get(this.plainUrl).pipe(map(response => {\r\n      for (let k in response) {\r\n        array.push(response[k])\r\n      }\r\n      for (let x in array) {\r\n        arrayX.push({\r\n          nombre: array[x].nombre,\r\n          contenido: []\r\n        })\r\n        for (let cont in array[x].contenido) {\r\n          if (cont !== '0') { //Filtro para que no tire el 0 que se genera al crear una lista nueva siempre\r\n            arrayX[x].contenido.push({\r\n              id: cont,\r\n              imagen: array[x].contenido[cont].imagen,\r\n              titulo: array[x].contenido[cont].titulo\r\n            })\r\n          }\r\n        }\r\n      }\r\n    })).subscribe()\r\n    console.log(arrayX)\r\n    return arrayX;\r\n  }\r\n\r\n  getList(ind, movieId) {\r\n    const gotList: string[] = [];\r\n    let exist: boolean = false;\r\n    this.http.get(this.plainUrl)\r\n    .pipe(map(res => {\r\n      for (const key in res[ind].listContent){\r\n        gotList.push(res[ind].listContent[key])\r\n        console.log(gotList)\r\n        if (res[ind].listContent[key] === movieId){\r\n          exist = true;\r\n        }\r\n      } \r\n      console.log('El id es ' + movieId);\r\n      if (exist === false) {\r\n        console.log('Primero' + [{...gotList}])\r\n        gotList.push(movieId);\r\n        console.log('Segundo' + gotList)\r\n      }\r\n      console.log('esta peli ' + exist)\r\n      let x = gotList.reduce(function(s,a){\r\n        s.push(a);\r\n        console.log('coso ' + s);\r\n        return s;\r\n      }, [])\r\n      console.log(x)\r\n      this.newListDeep(x, ind)\r\n    })).subscribe()\r\n  }\r\n\r\n  MovieToList(chosenOpt: string, loadedId: string, data) {\r\n    this.http.put(this.baseUrl + '/' + chosenOpt +'/contenido/' + loadedId + '.json', data).subscribe({next: respuesta => {\r\n      console.log(respuesta)\r\n    }})\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}